# 智能交易代理系统 - 使用示例

## 🎯 快速体验

### 第一次使用

1. **双击运行安装**
   ```
   双击 install.bat → 等待安装完成
   ```

2. **配置API密钥**
   ```
   打开 config/config.yaml
   将 "你的DeepSeek_API密钥" 替换为实际密钥
   ```

3. **启动系统**
   ```
   双击运行 main.py 或在命令行输入：python main.py
   ```

### 常见使用场景

#### 场景1：每日市场分析
```bash
# 早上开盘前（9:00前）
python main.py
# 获取前一交易日完整分析

# 下午收盘后（15:30后）  
python main.py
# 获取当日最新分析
```

#### 场景2：交互式查询
```bash
python chat.py

# 输入命令：
market     # 获取综合分析
summary    # 快速摘要
quit       # 退出
```

#### 场景3：自然语言对话（智能调用）
```bash
python chat.py

# 系统会根据问题自动调用相应的数据源：
"哪些股票涨停了？"      # → 自动调用热钱数据（快速响应）
"今天大盘怎么样？"      # → 自动调用价格数据
"有什么重要新闻？"      # → 自动调用新闻数据
"宏观经济形势如何？"   # → 自动调用宏观经济数据
"市场整体分析一下"     # → 调用综合分析（完整数据）
"给我分析投资机会"     # → 正常对话（不调用数据）
```

## 📊 输出示例

### 主程序输出
```
==================================================
交易代理系统启动
==================================================
市场类型: CN-Stock
系统语言: 中文
LLM模型: deepseek-chat

测试综合市场分析系统...
使用当前时间: 2025-09-11 17:30:00
正在获取综合分析...

📊 分析结果:
交易日: 20250911
数据源: 4/4
宏观数据: ✓
价格数据: ✓
热钱数据: ✓  
新闻数据: ✓

📝 综合分析报告:
--------------------------------------------------
# 2025年09月11日 A股市场综合分析报告

## 一、宏观经济数据
[GDP、CPI、PPI、失业率等核心经济指标分析]

## 二、价格市场数据
[详细的价格数据和技术分析]

## 三、热钱市场数据  
[资金流向和热点板块分析]

## 四、相关新闻资讯
[重要财经新闻汇总]

## LLM综合分析
[AI深度分析和投资建议]
--------------------------------------------------
```

### 聊天模式输出
```
🤖 智能交易助手已启动
输入 'market' 获取市场分析
输入 'quit' 退出程序

用户: 宏观经济形势如何？
📊 获取宏观经济数据耗时: 3.45秒
🤖 LLM响应耗时: 1.56秒
⏱️ 总响应时间: 5.01秒
助手: 根据最新宏观经济数据分析：
1. GDP同比增长X%，经济增长稳健
2. CPI月率X%，通胀压力可控
3. 失业率X%，就业市场稳定
4. 社会融资规模增长X%，货币政策宽松
...

用户: 今天市场怎么样？
📊 获取价格数据耗时: 2.35秒
🤖 LLM响应耗时: 1.23秒
⏱️ 总响应时间: 3.58秒
助手: 根据今日数据分析，市场呈现以下特点：
1. 上证指数上涨X%，成交量放大
2. 热点板块集中在科技、新能源
3. 资金流向显示机构增仓明显
...

用户: 平安银行的财务数据如何？
🔍 从股票名称'平安银行'映射到代码: 000001
📊 获取财务数据耗时: 4.12秒
🤖 LLM响应耗时: 1.45秒
⏱️ 总响应时间: 5.57秒
助手: 📊 000001 财务数据分析: 根据平安银行最新财务数据分析：
1. 营业收入同比增长X%，盈利能力稳健
2. 资产负债结构合理，风险控制良好
3. 现金流状况健康，经营质量提升
...

用户: 000001的财报怎么样？
🔍 从用户输入中提取到A股代码: 000001
📊 获取财务数据耗时: 3.85秒
🤖 LLM响应耗时: 1.32秒
⏱️ 总响应时间: 5.17秒
助手: 📊 000001 财务数据分析: [详细财务分析]

用户: 腾讯的财务分析
🔍 从股票名称'腾讯'映射到代码: 00700
📊 获取财务数据耗时: 4.25秒
🤖 LLM响应耗时: 1.38秒
⏱️ 总响应时间: 5.63秒
助手: 📊 00700 财务数据分析: [腾讯财务分析]
```

### 财务查询模式示例
```
用户: financial
系统: 📊 进入财务数据查询模式
     请输入股票代码或股票名称（例如：000001、平安银行、贵州茅台）
     输入 'back' 返回主菜单

用户: 中科曙光
系统: 🤔 正在查询财务数据...
      📊 603019 财务数据分析: [中科曙光财务分析]

用户: 不存在的股票
系统: ❌ 未找到股票代码或名称 '不存在的股票'，请检查输入是否正确。
      支持的格式：
      - 股票代码：000001、600519等
      - 股票名称：平安银行、贵州茅台等
      - 带后缀代码：000001.SH、600036.SZ等

用户: back
系统: 返回主菜单
```

## 🔧 故障排除示例

### 问题1：API密钥错误
```
错误信息：The api_key client option must be set
解决方法：
1. 打开 config/config.yaml
2. 确认 api_key 已正确填写
3. 重新运行程序
```

### 问题2：网络连接问题
```
错误信息：Connection timeout
解决方法：
1. 检查网络连接
2. 稍后重试
3. 程序会自动重试
```

### 问题3：数据获取失败
```
错误信息：Failed to get data
解决方法：
1. 这是正常现象，程序会继续运行
2. 检查日志了解具体原因
3. 稍后重试
```

## 💡 使用技巧

### 最佳运行时间
- **09:00前**：获取前一交易日完整数据
- **15:30后**：获取当日最新数据
- **盘中**：获取实时动态（可能数据不完整）

### 数据解读
- **绿色✓**：数据获取成功
- **红色✗**：数据获取失败
- **数字显示**：成功获取的数据源数量（现在是4个数据源）

### 宏观经济数据使用
- **GDP分析**：了解经济增长趋势
- **CPI/PPI分析**：判断通胀压力和成本变化
- **就业数据**：评估经济健康状况
- **社会融资**：分析货币政策和流动性
- **进出口数据**：评估外需和贸易状况

### 缓存机制
- 首次运行会调用API获取数据
- 相同数据会使用缓存，速度更快
- 缓存24小时自动过期

## 📈 进阶使用

### 自定义分析
可以修改 `comprehensive_analysis.py` 来：
- 调整分析重点
- 修改输出格式
- 添加新的数据源

### 扩展功能
可以添加新的数据源：
1. 在 `data_source/` 目录创建新文件
2. 继承 `DataSourceBase` 类
3. 在 `comprehensive_analysis.py` 中集成

### 性能优化
- 调整缓存时间
- 修改批次大小
- 优化请求间隔

---

**提示**：首次使用建议先运行 `python quick_test.py` 测试基本功能！

**新功能**：v1.1.0版本新增宏观经济数据源，现在可以获取GDP、CPI、PPI、失业率等核心经济指标，让分析更加全面！
